#
# processed with    configure_file @ONLY   so may need @VAR@ rather than ${VAR} in some circumstances
#

if (NOT WIN32)
    set(CMAKE_LEGACY_CYGWIN_WIN32 0) # Remove this line when CMake >= 2.8.4 is required
endif()

set (CPACK_PACKAGE_NAME "NeXusDefinitions")

set(CPACK_TGZ_COMPONENT_INSTALL ON)

set(CPACK_ZIP_COMPONENT_INSTALL ON)

set(CPACK_PACKAGE_CONTACT "NeXus Developers <nexus-tech@nexusformat.org>")

set (CPACK_RPM_PACKAGE_NAME "nexus-definitions")
set (CPACK_RPM_PACKAGE_ARCHITECTURE "noarch")
set (CPACK_RPM_PACKAGE_RELEASE "1")
set (CPACK_RPM_PACKAGE_REQUIRES "python >= 2.5.0, cmake >= 2.8")
#set (CPACK_RPM_PACKAGE_PROVIDES "")
set(CPACK_RPM_COMPONENT_INSTALL ON)

#CPACK_PACKAGING_INSTALL_PREFIX
#CPACK_PACKAGE_INSTALL_DIRECTORY "definitions ${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}-${CPACK_PACKAGE_VERSION_PATCH}"

set (CPACK_DEBIAN_COMPONENT_INSTALL ON)
set (CPACK_DEBIAN_PACKAGE_NAME "nexus-definitions")
set (CPACK_DEBIAN_PACKAGE_ARCHITECTURE "all")
set (CPACK_DEBIAN_PACKAGE_MAINTAINER ${CPACK_PACKAGE_CONTACT})

set (CPACK_PACKAGE_VENDOR "NeXus International Advisory Committee")
set (CPACK_PACKAGE_VERSION_MAJOR "4")
set (CPACK_PACKAGE_VERSION_MINOR "3")
set (CPACK_PACKAGE_VERSION_PATCH "0")
#set (CPACK_PACKAGE_DESCRIPTION_FILE "${CMAKE_SOURCE_DIR}/cmake_include/nexus_description.txt")
set (CPACK_PACKAGE_DESCRIPTION_SUMMARY "NeXus - a common format for neutron and X-ray scattering data http://www.nexusformat.org/")
set (CPACK_PACKAGE_FILE_NAME "nexus-definitions-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}-${CPACK_PACKAGE_VERSION_PATCH}")
set (CPACK_PACKAGE_INSTALL_DIRECTORY "NeXus Data Format")
set (CPACK_RESOURCE_FILE_LICENSE "@CMAKE_SOURCE_DIR@/COPYING")
#set (CPACK_RESOURCE_FILE_README)
set (CPACK_RESOURCE_FILE_WELCOME "@CMAKE_SOURCE_DIR@/cmake_include/WELCOME")
#set (CPACK_MONOLITHIC_INSTALL)

set(CPACK_BINARY_ZIP OFF)
#set(CPACK_SOURCE_IGNORE_FILES 
#	  "nexus_spec.in;~$;/\.svn/;/\.cvsignore/;/CMakeFiles/;/nbproject/;autogen.sh;cmake_install.cmake;Makefile;${CPACK_SOURCE_IGNORE_FILES}") 

# we do not have any absolute paths, so do not need DESTDIR
SET(CPACK_SET_DESTDIR "OFF")

if(WIN32)
	set(CPACK_BINARY_NSIS OFF)
	set(CPACK_NSIS_PACKAGE_NAME "NeXus Definitions ${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}-${CPACK_PACKAGE_VERSION_PATCH}")
#	  set(CPACK_PACKAGE_ICON "${CMake_SOURCE_DIR}/Utilities/Release\\\\InstallIcon.bmp")
#  set(CPACK_NSIS_INSTALLED_ICON_NAME "bin\\\\MyExecutable.exe")
   set(CPACK_NSIS_DISPLAY_NAME "${CPACK_PACKAGE_INSTALL_DIRECTORY} NeXus")
   set(CPACK_NSIS_HELP_LINK "http://www.nexusformat.org/")
   set(CPACK_NSIS_URL_INFO_ABOUT "http://www.nexusformat.org/")
   set(CPACK_NSIS_CONTACT "nexus-tech@nexusformat.org")
   set(CPACK_NSIS_MODIFY_PATH ON)
   #   CPACK_PACKAGE_INSTALL_REGISTRY_KEY  - Name of the registry key for the installer
#   set(CPACK_NSIS_EXTRA_INSTALL_COMMANDS "!include \"${CMAKE_SOURCE_DIR}/nsis_install.nsh\"")  
#   set(CPACK_NSIS_EXTRA_UNINSTALL_COMMANDS "!include \"${CMAKE_SOURCE_DIR}/nsis_uninstall.nsh\"")
endif(WIN32)
#set (CPACK_OUTPUT_CONFIG_FILE)
#set (CPACK_PACKAGE_EXECUTABLES)
#set (CPACK_STRIP_FILES)
set (CPACK_SOURCE_PACKAGE_FILE_NAME "nexus-definitions-source-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}-${CPACK_PACKAGE_VERSION_PATCH}")
#set (CPACK_SOURCE_STRIP_FILES)
#set (CPACK_SOURCE_GENERATOR)
#set (CPACK_SOURCE_OUTPUT_CONFIG_FILE)
#set (CPACK_SOURCE_IGNORE_FILES)

#cpack_add_component(definitions
#                    DISPLAY_NAME "NeXus NXDL definitions"
#                    DESCRIPTION "Binary applications such as nxconvert, nxbrows etc..."
#                    )

#cpack_add_component(manual
#                    DISPLAY_NAME "Documentation"
#                    DESCRIPTION "Application Documentation, API and help files."
#                    )

#cpack_add_component(Development
#                    DISPLAY_NAME "Development"
#                    DESCRIPTION "Development libraies and headers."
#                    )

#cpack_add_component(Examples
#                    DISPLAY_NAME "Examples"
#                    DESCRIPTION "Code example files."
#                    )
