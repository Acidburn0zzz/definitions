<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="http://www.oasis-open.org/docbook/xml/5.0/rng/docbook.rng" type="xml"?>
<!-- # $Id: h5py-example.xml 1019 2011-11-18 18:00:14Z Pete Jemian $ -->
<section  xml:id="Example-Viewing-LRMECS-Data" 
  xreflabel="Viewing 2-D Data from LRMECS"
  xmlns="http://docbook.org/ns/docbook" 
  version="5.0"
  xmlns:xlink="http://www.w3.org/1999/xlink" 
  xmlns:xi="http://www.w3.org/2001/XInclude">

  <title>Viewing 2-D Data from LRMECS</title>
  
  <para>
    The LRMECS instrument stored data in NeXus HDF4 data files.  One such example
    is available from the repository of NeXus data file examples:
    <link 
      xlink:href="http://svn.nexusformat.org/definitions/exampledata/IPNS/LRMECS/lrcs3701.nxs"><code
        >http://svn.nexusformat.org/definitions/exampledata/IPNS/LRMECS/lrcs3701.nxs</code ></link>
    For this example, we will start with a conversion of that original data file into HDF5 format:
    <link 
      xlink:href="http://svn.nexusformat.org/definitions/exampledata/IPNS/LRMECS/lrcs3701.nx5"><code
        >http://svn.nexusformat.org/definitions/exampledata/IPNS/LRMECS/lrcs3701.nx5</code ></link>
    This file contains two histograms with 2-D images (148x750 and 148x32) of 32-bit integers.
    First, we use the <code>h5dump</code> tool to investigate the header content of the file 
    (no data).
  </para>
  
  <section>
    <title>Visualize Using <code>h5dump</code></title>
    
    <para> 
      Here, the output of the command: <code>h5dump -H lrcs3701.nx5</code> has been edited to 
      only show the first <code>NXdata</code> group (<emphasis>/Histogram1/data</emphasis>):
      <example>
        <title>LRMECS <code>lrcs3701</code> data: <code>h5dump</code> output</title>
        <programlisting linenumbering="numbered"
                    ><xi:include href="examples/lrmecs/dump-histogram1-data.txt" parse="text"
                    /></programlisting>
      </example>
    </para>
  </section>
  
  <section>
    <title>Visualize Using <emphasis>HDFview</emphasis></title>
    
    <para>
      For many, the simplest way to view the data content of an HDF5 file is to use the 
      <emphasis>HDFview</emphasis><footnote><para><emphasis>HDFview</emphasis>:<link 
        xlink:href="http://www.hdfgroup.org/hdf-java-html/hdfview"><code
          >http://www.hdfgroup.org/hdf-java-html/hdfview</code 
        ></link></para></footnote>
      program from The HDF Group.  After starting <emphasis>HDFview</emphasis>, the data file 
      may be loaded by dragging it into the main HDF window.
      On opening up to the first <code>NXdata</code> group <emphasis>/Histogram1/data</emphasis>
      (as above), and then double-clicking the dataset called: <emphasis>data</emphasis>, we get
      our first view of the data.
    </para>
    
    <figure xml:id="Example-Viewing-LRMECS-Data-hdfview" xreflabel="LRMECS lrcs3701 data: HDFview">
      <title>LRMECS <code>lrcs3701</code> data: <emphasis>HDFview</emphasis></title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="examples/lrmecs/hdfview.jpg" width="300pt" scalefit="1"/>
        </imageobject>
      </mediaobject>
    </figure>
    
    <para>The data may be represented as an image by accessing the <emphasis>Open As</emphasis>
      menu from HDFview (on Windows, right click the dataset called <emphasis>data</emphasis>
      and select the <emphasis>Open As</emphasis> item, consult the HDFview documentation 
      for different platform instructions).  Be sure to select the <emphasis>Image</emphasis> 
      radio button, and then (accepting everything else as a default) press the
      <emphasis>Ok</emphasis> button.
    </para>
    
    <figure>
      <title>LRMECS <code>lrcs3701</code> data: <emphasis>HDFview</emphasis> <emphasis>Open As</emphasis> dialog</title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="examples/lrmecs/hdfview-open-as.jpg" width="300pt" scalefit="1"/>
        </imageobject>
      </mediaobject>
    </figure>
    
    <note><para>In this image, dark represents low intensity 
      while white represents high intensity.</para></note>
    
    <figure>
      <title>LRMECS <code>lrcs3701</code> data: <emphasis>HDFview</emphasis> Image</title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="examples/lrmecs/hdfview-image.jpg" width="300pt" scalefit="1"/>
        </imageobject>
      </mediaobject>
    </figure>
  </section>
  
  <section>
    <title>Visualize Using <emphasis>IgorPro</emphasis></title>
    
    <para>Another way to visualize this data is to use a commercial package for scientific
      data visualization and analysis.  One such package is <emphasis>IgorPro</emphasis
      >.<footnote><para><emphasis>IgorPro</emphasis>:<link 
        xlink:href="http://www.wavemetrics.com/"><code
          >http://www.wavemetrics.com/</code 
        ></link></para></footnote>
      IgorPro provides a browser for HDF5 files that can open our NeXus HDF5 and display the image.
      Follow the instructions from WaveMetrics to install the <emphasis>HDF5 Browser</emphasis>
      package:<link 
        xlink:href="http://www.wavemetrics.com/products/igorpro/dataaccess/hdf5.htm"><code
          >http://www.wavemetrics.com/products/igorpro/dataaccess/hdf5.htm</code 
        ></link>
    </para>
    
    <para>
      You may not have to do this step if you have already installed the <emphasis>HDF5 Browser</emphasis>.
      IgorPro will tell you if it not installed properly.
      To install the <emphasis>HDF5 Browser</emphasis>, first start <emphasis>IgorPro</emphasis>.
      Next, select from the menus and submenus: 
      <code>Data; Load Waves; Packages; Install HDF5 Browser Package</code> as shown in the next figure.
    </para>
    
    <figure>
      <title>LRMECS <code>lrcs3701</code> data: <emphasis>IgorPro</emphasis> install HDF5 Browser</title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="examples/lrmecs/igor-install-hdf5-package.jpg" width="300pt" scalefit="1"/>
        </imageobject>
      </mediaobject>
    </figure>
    
    <para>
      Next, open the <emphasis>HDF5 Browser</emphasis> by selecting
      from the menus and submenus: 
      <code>Data; Load Waves; New HDF5 Browser</code> as shown in the next figure.
      
    </para>
    
    <figure>
      <title>LRMECS <code>lrcs3701</code> data: <emphasis>IgorPro</emphasis> <emphasis>HDFBrowser</emphasis> dialog</title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="examples/lrmecs/igor-menu-selection.jpg" width="300pt" scalefit="1"/>
        </imageobject>
      </mediaobject>
    </figure>
    
    <para>
      Next, click the <emphasis>Open HDF5 File</emphasis> button and 
      open the NeXus HDF5 file <code>lrcs3701.nxs</code>.  In the lower left <emphasis>Groups</emphasis>
      panel, click the <emphasis>data</emphasis> dataset.  Also, under the panel
      on the right called <emphasis>Load Dataset Options</emphasis>,
      choose <code>No Table</code> as shown.
    </para>
    
    <figure>
      <title>LRMECS <code>lrcs3701</code> data: <emphasis>IgorPro</emphasis> <emphasis>HDFBrowser</emphasis> dialog</title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="examples/lrmecs/Igor-HDFBrowser-demo.jpg" width="300pt" scalefit="1"/>
        </imageobject>
      </mediaobject>
    </figure>
    
    <note><para>In this image, white represents low intensity 
      while dark represents high intensity.  Also note the 
      horizontal scale is in reverse order from the <emphasis>HDFview</emphasis> 
      image above, thus the image is reversed in the horizontal direction.</para></note>
    
    <figure>
      <title>LRMECS <code>lrcs3701</code> data: <emphasis>IgorPro</emphasis> Image</title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="examples/lrmecs/igor-data.jpg" width="300pt" scalefit="1"/>
        </imageobject>
      </mediaobject>
    </figure>
  </section>
  
</section>
