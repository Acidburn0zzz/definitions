<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="http://www.oasis-open.org/docbook/xml/5.0/rng/docbook.rng" type="xml"?>
<!-- # $Id: h5py-example.xml 974 2011-10-27 05:11:55Z Pete Jemian $ -->
<section  xml:id="Example-writer_1_3" 
  xreflabel="h5py example writing the simplest NeXus data file"
  xmlns="http://docbook.org/ns/docbook" 
  version="5.0"
  xmlns:xlink="http://www.w3.org/1999/xlink" 
  xmlns:xi="http://www.w3.org/2001/XInclude">
  <title><code>h5py</code> example writing the simplest NeXus data file</title>
  
  <para>In the <xref linkend="Introduction"/> chapter, the
    <xref linkend="Simple example"/> figure shows the simplest
    possible NeXus data file.  This <code>h5py</code> code
    example will show how to build an HDF5 data file with that structure.
    The numerical data will be taken from the writer in the 
    previous example, <xref linkend="Example-H5py"/>.
    The structure of the file is almost identical with that example.  
    The only real difference is that, here, the only information
    written to the file is the absolute minimum information NeXus requires.
  </para>
  <para>The source code that generates the file is shown.
    Next is shown the results of <code>h5dump</code> on the data file.
    Last, the structure of the data file is shown, as generated by <code>h5toText.py</code>.  
    This is easier to read, in general, than the <code>h5dump</code> output.
  </para>
  
  <!-- TODO: finish writing this section -->
  <note><para>The text for this example is under construction.</para></note>
  
  
  <programlisting linenumbering="numbered"
                ><xi:include href="examples/h5py/writer_1_3.py" parse="text"
                /></programlisting>
  
  <programlisting linenumbering="numbered"
                ><xi:include href="examples/h5py/writer_1_3_h5dump.txt" parse="text"
                /></programlisting>
  
  <programlisting linenumbering="numbered"
                ><xi:include href="examples/h5py/writer_1_3_structure.txt" parse="text"
                /></programlisting>
  
  <para>
    Both this example and the next will make use of
    a small subroutine library that calls <code>h5py</code> to create the
    various NeXus data components of 
    <xref linkend="Design-Groups"/>,
    <xref linkend="Design-Fields"/>, 
    <xref linkend="Design-Attributes"/>, and
    <xref linkend="Design-Links"/>.
    In a smaller sense, this subroutine library fills the role of the NAPI for writing
    the data using h5py.
  </para>
  
  <programlisting linenumbering="numbered"
                ><xi:include href="examples/h5py/my_lib.py" parse="text"
                /></programlisting>
  
  <programlisting linenumbering="numbered"
                ><xi:include href="examples/h5py/h5toText.py" parse="text"
                /></programlisting>
  
</section>
