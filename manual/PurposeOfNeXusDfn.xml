<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="http://www.oasis-open.org/docbook/xml/5.0/rng/docbook.rng" type="xml"?>
<!-- # $Id$ -->
<chapter xml:id="PurposeOfNeXusDfnChapter" xmlns="http://docbook.org/ns/docbook" version="5.0"
    xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>Purpose of NeXus definitions</title>
    <para>
        <!-- 
            Today:
            * Lots of different data formats
            * Time wasted converting data
            * Old formats no longer capable of delivering for new high throughput detectors
            * Difficult to add additional data
            * Often, for DA multiple different files needed
            * Badly documented formats
            Tomorrow, with NeXus:
            * Single, efficient, platform independent data format
            * All information in one file
            * Self-describing
            * Extendable
        -->
        By the early 1990s, several groups of scientists in the fields of neutron and 
        X-ray science had recognized a common and troublesome pattern in the data acquired 
        at various scientific instruments and user facilities.  Each of these instruments
        and facilities had a locally defined format for recording experimental data.
        With lots of different formats, much of the scientists' time was being wasted in 
        the task of writing import readers for processing and analysis programs.
        As is common, the exact information to be documented from each instrument in a
        data file evolves, such as the implementation of new high-throughput detectors.  
        Many of these formats lacked the generality to extend to the
        new data to be stored, thus another new format was devised.  In such environments,
        the documentation of each generation of data format is often lacking.
    </para>
    <para>
        In 1994, scientists from three institutions<footnote>
            <para>
                Jon Tischler and Mitch Nelson (Oak Ridge National Laboratory, USA),
                Przemek Klosowski, (National Institute of Standards and Technology, USA),
                and Mark Koennecke (Paul Scherer Institute, Switzerland)
            </para>
        </footnote>
        independently proposed methods to store data using 
        a self-describing, extensible format that was already in broad use
        in other scientific disciplines.  The proposals were brought together to form NeXus.
    </para>

    <section>
        <title>Simple plotting</title>
        <para> An important motivation for the design of NeXus was to simplify the creation of a
            default plot view. While the best representation of a set of observations will vary,
            depending on various conditions, a good suggestion is often known <emphasis>a
                priori</emphasis>. This suggestion is described in the <literal>NXdata</literal>
            element so that any program that is used to browse NeXus data files can provide a
                <emphasis>best representation</emphasis> without request for user input. </para>
    </section>
    <section>
        <title>Unified format for reduction and analysis</title>
        <para> Another important motivation for NeXus, indeed the <emphasis>raison
            d'etre</emphasis>, was the community need to analyze data from different user
            facilities. By the late 1980s, it had become common practice for a scientific instrument
            or facility to define its own data format, often at the convenience of the local
            computer system. Data from these facilities were not easily interchanged due to various
            differences in computer systems and the compression schemes of binary data. It was
            necessary to contact the facility to obtain a description so that one could write an
            import routine in software. Experience with facilities closing (and subsequent lack of
            access to information describing the facility data format) revealed a significant
            limitation with this common practice. </para>
        <para>
            <!-- hit these points: Portable, self describing, extendable, public domain -->
            <emphasis role="bold">Self-description</emphasis>, combined with a reliance on a
            <emphasis role="bold">multi-platform</emphasis> (and thereby <emphasis role="bold">portable</emphasis>) data
            storage format, were valued components of a data storage format where the longevity of
            the data was expected to be longer than the lifetime of the facility at which it was
            acquired. As the name implies, self-description within data files is the practice where
            the structure of the information contained within the file is evident from the file
            itself. A multi-platform data storage format must faithfully represent the data
            identically on a variety of computer systems, regardless of the bit order or byte order
            or word size native to the computer. </para>
        <para> The scientific community continues to grow the various types of data to be expressed
            in data files. This practice is expected to continue as part of the investigative
            process. To gain broad acceptance in the scientific user community, any data storage
            format proposed as a standard would need to be 
            <emphasis role="bold">extendable</emphasis> and continue to provide a means to express the
            latest notions of scientific data. </para>
        <para> The maintenance cost of common data structures meeting the motivations above
            (self-describing, portable, and extendable) is not insurmountable but is often
            well-beyond the research funding of individual members of the muon, neutron, and X-ray
            science communities. Since it is these members that drive the selection of a data
            storage format, it is necessary for the user cost to be as minimal as possible. In this
            case, experience has shown that the format must be in the
            <emphasis role="bold">public-domain</emphasis> for it to be commonly accepted as a standard. A
            benefit of the public-domain aspect is that the source code for the API is open and
            accessible, a point which has received notable comment in the scientific literature.
            <!-- 
                PRJ: For example, there was a letter to the editor of J Appl Cryst 
                in the late 1970s complaining about the increasingly-common practice
                of withholding the source code.  If we find the reference, we should cite it here.
            -->
        </para>
        <para> At its beginnings, the founders of NeXus identified the Hierarchical Data Format
            (HDF), <indexterm>
                <primary>HDF</primary>
            </indexterm> initially from the National Center for Supercomputing Applications (NCSA)
            at the University of Illinois at Urbana-Champaign (UIUC) and later spun off into its own
            group called The HDF Group (THG),<footnote>
                <para> The HDF Group: <link xmlns:xlink="http://www.w3.org/1999/xlink"
                        xlink:href="http://www.hdfgroup.org/">http://www.hdfgroup.org/</link>
                </para>
            </footnote> as a multi-platform data storage format with capacity for conveying large
            data payloads and a substantial user community. HDF (now HDF5) was provided with
            software to read and write data (this is the application-programmer interface, or API) <indexterm>
                <primary>API</primary>
            </indexterm> using a large number of computing systems in common use for neutron and
            X-ray science. HDF is a binary data file format that supports compression and structured
            data. </para>
        <para> More recently, NeXus has recognized that part of the scientific community with a
            desire to write and record scientific data, has small data volumes and a large aversion
            to the requirement of a complicated API necessary to access data in binary files such as
            HDF. For such information, the NeXus API <indexterm>
                <primary>API</primary>
            </indexterm> has been extended by the addition of the eXtensible Markup Language<footnote>
                <para> XML: <link xmlns:xlink="http://www.w3.org/1999/xlink"
                        xlink:href="http://www.w3.org/XML/">http://www.w3.org/XML/</link>. There are
                    many other descriptions of XML, for example: <link
                        xmlns:xlink="http://www.w3.org/1999/xlink"
                        xlink:href="http://en.wikipedia.org/wiki/XML"
                        >http://en.wikipedia.org/wiki/XML</link>
                </para>
            </footnote> (XML) <indexterm>
                <primary>XML</primary>
            </indexterm> as an alternative to HDF. XML is a text-based format that supports
            compression and structured data and has broad usage in business and e-commerce. While
            possibly complicated, XML files are human readable, and tools for translation and
            extraction are plentiful. The API has routines to read and write XML data and to convert
            between HDF and XML. </para>
    </section>
    <section>
        <title>Defined Dictionary</title>
        <para> A necessary feature of a standard for the interchange of scientific data is a
                <emphasis>defined dictionary</emphasis> (or <emphasis>lexicography</emphasis>) of
            terms. This dictionary declares the expected spelling and meaning of terms when they are
            present so that it is not necessary to search for all the variant forms of
                <emphasis>energy</emphasis> when it is used to describe data (e.g.,
                <literal>E</literal>, <literal>e</literal>, <literal>keV</literal>,
                <literal>eV</literal>, <literal>nrg</literal>, ...). </para>
        <para> NeXus recognized that each scientific specialty has developed a unique dictionary and
            needs to categorize data using those terms. The NeXus Application Definitions provide
            the means to document the lexicography for use in data files of that scientific
            specialty. </para>
    </section>
</chapter>
