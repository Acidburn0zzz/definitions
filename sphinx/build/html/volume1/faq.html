

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3. Frequently Asked Questions &mdash; NeXus: User Guide and Reference Documentation v2011-09 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2011-09',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="NeXus: User Guide and Reference Documentation v2011-09 documentation" href="../index.html" />
    <link rel="up" title="NeXus: User Manual" href="index.html" />
    <link rel="next" title="NeXus: Reference Documentation" href="../volume2/index.html" />
    <link rel="prev" title="2.1.7.3.1.3. Physical File format" href="design/fileformat.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../volume2/index.html" title="NeXus: Reference Documentation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="design/fileformat.html" title="2.1.7.3.1.3. Physical File format"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">NeXus: User Guide and Reference Documentation v2011-09 documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Contents</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">NeXus: User Manual</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/nexuslogo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">3. Frequently Asked Questions</a><ul>
<li><a class="reference internal" href="#how-many-facilities-use-nexus">3.1. How many facilities use NeXus?</a></li>
<li><a class="reference internal" href="#nexus-files-are-binary-this-is-crazy-how-am-i-supposed-to-see-my-data">3.2. NeXus files are binary? This is crazy! How am I supposed to see my data?</a></li>
<li><a class="reference internal" href="#what-on-disk-file-format-should-i-choose-for-my-data">3.3. What on-disk file format should I choose for my data?</a></li>
<li><a class="reference internal" href="#why-are-the-nexus-classes-so-complicated-i-ll-never-store-all-that-information">3.4. Why are the NeXus classes so complicated? I&#8217;ll never store all that information</a></li>
<li><a class="reference internal" href="#i-don-t-like-nexus-it-seems-much-faster-and-simpler-to-develop-my-own-file-format-why-should-i-even-consider-nexus">3.5. I don&#8217;t like NeXus. It seems much faster and simpler to develop my own file format. Why should I even consider NeXus?</a></li>
<li><a class="reference internal" href="#i-want-to-produce-an-application-definition-how-do-i-go-about-it">3.6. I want to produce an application definition. How do I go about it?</a></li>
<li><a class="reference internal" href="#what-is-the-purpose-of-nxdata">3.7. What is the purpose of <tt class="docutils literal"><span class="pre">NXdata</span></tt>?</a></li>
<li><a class="reference internal" href="#how-do-i-identify-the-plottable-data">3.8. How do I identify the plottable data?</a></li>
<li><a class="reference internal" href="#how-can-i-specify-reasonable-axes-for-my-data">3.9. How can I specify reasonable axes for my data?</a></li>
<li><a class="reference internal" href="#why-aren-t-nxsample-and-nxmonitor-groups-stored-in-the-nxinstrument-group">3.10. Why aren&#8217;t <tt class="docutils literal"><span class="pre">NXsample</span></tt> and <tt class="docutils literal"><span class="pre">NXmonitor</span></tt> groups stored in the <tt class="docutils literal"><span class="pre">NXinstrument</span></tt> group?</a></li>
<li><a class="reference internal" href="#specifications-are-boring-where-can-i-find-some-good-example-data-files">3.11. Specifications are boring. Where can I find some good example data files?</a></li>
<li><a class="reference internal" href="#can-i-use-a-nxdl-specification-to-parse-a-nexus-data-file">3.12. Can I use a NXDL specification to parse a NeXus data file?</a></li>
<li><a class="reference internal" href="#why-do-i-need-to-specify-the-napitype">3.13. Why do I need to specify the <tt class="docutils literal"><span class="pre">NAPItype</span></tt>?</a></li>
<li><a class="reference internal" href="#do-i-have-to-use-the-napi-subroutines-can-t-i-read-or-write-the-nexus-data-files-with-my-own-routines">3.14. Do I have to use the <tt class="docutils literal"><span class="pre">NAPI</span></tt> subroutines? Can&#8217;t I read (or write) the NeXus data files with my own routines?</a></li>
<li><a class="reference internal" href="#i-m-using-links-to-place-data-in-two-places-which-one-should-be-the-data-and-which-one-is-the-link">3.15. I&#8217;m using links to place data in two places. Which one should be the data and which one is the link?</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="design/fileformat.html"
                        title="previous chapter">2.1.7.3.1.3. Physical File format</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../volume2/index.html"
                        title="next chapter">NeXus: Reference Documentation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/volume1/faq.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="frequently-asked-questions">
<span id="faq"></span><h1>3. Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
<p id="index-0">This is a list of commonly asked questions concerning the NeXus data format.</p>
<div class="section" id="how-many-facilities-use-nexus">
<h2>3.1. How many facilities use NeXus?<a class="headerlink" href="#how-many-facilities-use-nexus" title="Permalink to this headline">¶</a></h2>
<p>This is not easy to say, not all facilities using NeXus actively
participate in the committee. Some facilities have reported their
adoption status on the :ref:<tt class="docutils literal"><span class="pre">Facilities</span> <span class="pre">Wiki</span> <span class="pre">page</span></tt>.
Please have a look at this list.
Keep in mind that it is not complete.</p>
</div>
<div class="section" id="nexus-files-are-binary-this-is-crazy-how-am-i-supposed-to-see-my-data">
<h2>3.2. NeXus files are binary? This is crazy! How am I supposed to see my data?<a class="headerlink" href="#nexus-files-are-binary-this-is-crazy-how-am-i-supposed-to-see-my-data" title="Permalink to this headline">¶</a></h2>
<p>NeXus files are not binary <em>per se</em>. If you use the XML backend the
data are stored in a relatively human readable form (see
<em class="xref std std-ref">this example</em>).
This backend however is only recommended for very small data sets. With
the multidimensional data that is routinely recorded on many modern
instruments it is very difficult anyway to retrieve useful
information on a VT100 terminal. If you want to try, for example
<tt class="docutils literal"><span class="pre">nxbrowse</span></tt>
is a utility provided by the NeXus community that can be very
helpful to those who want to inspect their files and avoid
graphical applications. For larger data volumes the binary backends
used with the appropriate tools are by far superior in terms of
efficiency and speed and most users happily accept that after having
worked with supersized &#8220;human readable&#8221; files for a while.</p>
</div>
<div class="section" id="what-on-disk-file-format-should-i-choose-for-my-data">
<h2>3.3. What on-disk file format should I choose for my data?<a class="headerlink" href="#what-on-disk-file-format-should-i-choose-for-my-data" title="Permalink to this headline">¶</a></h2>
<p>HDF5 is the default file container to use for NeXus data. It
is the recommended format for all applications. HDF4 is still
supported as a on disk format for NeXus but for new installations
preference should be given to HDF5. The XML backend is available
for special use cases. Choose this option with care considering the
space and speed implications.</p>
</div>
<div class="section" id="why-are-the-nexus-classes-so-complicated-i-ll-never-store-all-that-information">
<h2>3.4. Why are the NeXus classes so complicated? I&#8217;ll never store all that information<a class="headerlink" href="#why-are-the-nexus-classes-so-complicated-i-ll-never-store-all-that-information" title="Permalink to this headline">¶</a></h2>
<p>The NeXus classes are essentially <em>glossaries of terms</em>. If you
need to store a piece of information, consult the class definitions
to see if it has been defined. If so, use it. It is not compulsory
to include every item that has been defined in the base class if it
is not relevant to your experiment. On the other hand, a NeXus
application definition lists a smaller set of compulsory items that
should allow other researchers or software to analyze your data.
You should really follow the application definition that
corresponds to your experiment to take full advantage of NeXus.</p>
</div>
<div class="section" id="i-don-t-like-nexus-it-seems-much-faster-and-simpler-to-develop-my-own-file-format-why-should-i-even-consider-nexus">
<h2>3.5. I don&#8217;t like NeXus. It seems much faster and simpler to develop my own file format. Why should I even consider NeXus?<a class="headerlink" href="#i-don-t-like-nexus-it-seems-much-faster-and-simpler-to-develop-my-own-file-format-why-should-i-even-consider-nexus" title="Permalink to this headline">¶</a></h2>
<p>If you consider using an efficient on disk storage format,
HDF5 is a better choice than most others. It is fast and efficient
and well supported in all main stream programming languages and a
fair share of popular analysis packages. The format is so widely
used and backed by a big organisation that it will continue to be
supported for the foreseeable future.
So if you are going to use HDF5 anyway, why not use the NeXus
definition to lay out the data in a standardised way? The NeXus
community spent years trying to get the standard right and
while you will not agree with every single choice they made in the
past, you should be able to store the data you have in a quite
reasonable way. If you do not comply with NeXus chances are most
people will perceive your format as different but not necessarily
better than NeXus by any large measure. So it may not be worth the
effort. Seriously.
If you encounter any problems because the classes are not
sufficient to describe your configuration, please contact the NIAC
Executive Secretary explaining the problem, and post a suggestion
at the relevant class wiki page. Or raise the problem in one of the
<em class="xref std std-ref">mailing lists</em>.
The NIAC is always willing to consider new proposals.</p>
</div>
<div class="section" id="i-want-to-produce-an-application-definition-how-do-i-go-about-it">
<span id="index-1"></span><h2>3.6. I want to produce an application definition. How do I go about it?<a class="headerlink" href="#i-want-to-produce-an-application-definition-how-do-i-go-about-it" title="Permalink to this headline">¶</a></h2>
<p id="index-2">Read the NXDL Tutorial in
<a class="reference internal" href="../cheatsheet.html#nxdl-tutorial-creatingnxdlspec"><em>nxdl_tutorial-creatingnxdlspec (not converted yet)</em></a>.
The procedures for acceptance are defined in the NIAC constitution.
Refer to the most recent version of the NIAC constitution on the
NIAC wiki <a class="footnote-reference" href="#id2" id="id1">[1]</a>.</p>
<blockquote>
<div><table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>NIAC wiki: <a class="reference external" href="http://www.nexusformat.org/NIAC">http://www.nexusformat.org/NIAC</a></td></tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="what-is-the-purpose-of-nxdata">
<h2>3.7. What is the purpose of <tt class="docutils literal"><span class="pre">NXdata</span></tt>?<a class="headerlink" href="#what-is-the-purpose-of-nxdata" title="Permalink to this headline">¶</a></h2>
<p id="index-3"><tt class="docutils literal"><span class="pre">NXdata</span></tt> contains links to the data stored elsewhere in the
<tt class="docutils literal"><span class="pre">NXentry</span></tt>. It identifies the default plottable data. This is one of the
basic motivations (see <a class="reference internal" href="introduction/motivations/plotting.html#simpleplotting"><em>Simple plotting</em></a>)
for the NeXus standard. The choice of the name <tt class="docutils literal"><span class="pre">NXdata</span></tt>
is historic and does not really reflect its function.</p>
</div>
<div class="section" id="how-do-i-identify-the-plottable-data">
<span id="how-to-find-the-plottable-data"></span><h2>3.8. How do I identify the plottable data?<a class="headerlink" href="#how-do-i-identify-the-plottable-data" title="Permalink to this headline">¶</a></h2>
<p id="index-4">Any program whose aim is to identify plottable data should use the
following procedure:</p>
<blockquote>
<div><span class="target" id="index-5"></span></div></blockquote>
<ol class="arabic simple" id="index-6">
<li>Open the first top level NeXus group with class <tt class="docutils literal"><span class="pre">NXentry</span></tt>.</li>
<li>Open the first NeXus group with class <tt class="docutils literal"><span class="pre">NXdata</span></tt>.</li>
<li>Loop through NeXus fields in this group searching for the item
with attribute <tt class="docutils literal"><span class="pre">signal=&quot;1&quot;</span></tt>
indicating this field has the plottable data.</li>
<li>Check to see if this field has an attribute called
<tt class="docutils literal"><span class="pre">axes</span></tt>. If so, the attribute value contains a colon (or comma)
delimited list (in the C-order of the data array) with the names
of the dimension scales
associated with the plottable data. And
then you can skip the next two steps.</li>
<li>If the <tt class="docutils literal"><span class="pre">axes</span></tt>
attribute is not defined, search for the one-dimensional NeXus
fields with attribute <tt class="docutils literal"><span class="pre">primary=&quot;1&quot;</span></tt>.</li>
<li>These are the dimension scales
to label the axes of each
dimension of the data.</li>
<li>Link each dimension scale
to the respective data dimension by
the <tt class="docutils literal"><span class="pre">axis</span></tt> attribute (<tt class="docutils literal"><span class="pre">axis=&quot;1&quot;</span></tt>,
<tt class="docutils literal"><span class="pre">axis=&quot;2&quot;</span></tt>, ... up to the rank of the data).</li>
<li>If necessary, close the <tt class="docutils literal"><span class="pre">NXdata</span></tt>
group, open the next one and repeat steps 3 to 6.</li>
<li>If necessary, close the <tt class="docutils literal"><span class="pre">NXentry</span></tt>
group, open the next one and repeat steps 2 to 7.</li>
</ol>
<p>Consult the <em class="xref std std-ref">NeXus API</em>
section, which describes the routines available to program these
operations. In the course of time, generic NeXus browsers will
provide this functionality automatically.</p>
</div>
<div class="section" id="how-can-i-specify-reasonable-axes-for-my-data">
<h2>3.9. How can I specify reasonable axes for my data?<a class="headerlink" href="#how-can-i-specify-reasonable-axes-for-my-data" title="Permalink to this headline">¶</a></h2>
<p>See question on how to find plottable data
(<a class="reference internal" href="#how-to-find-the-plottable-data"><em>How do I identify the plottable data?</em></a>).</p>
</div>
<div class="section" id="why-aren-t-nxsample-and-nxmonitor-groups-stored-in-the-nxinstrument-group">
<h2>3.10. Why aren&#8217;t <tt class="docutils literal"><span class="pre">NXsample</span></tt> and <tt class="docutils literal"><span class="pre">NXmonitor</span></tt> groups stored in the <tt class="docutils literal"><span class="pre">NXinstrument</span></tt> group?<a class="headerlink" href="#why-aren-t-nxsample-and-nxmonitor-groups-stored-in-the-nxinstrument-group" title="Permalink to this headline">¶</a></h2>
<p>A NeXus file can contain a number of <tt class="docutils literal"><span class="pre">NXentry</span></tt>
groups, which may represent different scans in an experiment, or
sample and calibration runs, etc. In many cases, though by no means
all, the instrument has the same configuration so that it would be
possible to save space by storing the <tt class="docutils literal"><span class="pre">NXinstrument</span></tt>
group once and using multiple links in the remaining <tt class="docutils literal"><span class="pre">NXentry</span></tt>
groups. It is assumed that the sample and monitor information would
be more likely to change from run to run, and so should be stored
at the top level.</p>
</div>
<div class="section" id="specifications-are-boring-where-can-i-find-some-good-example-data-files">
<h2>3.11. Specifications are boring. Where can I find some good example data files?<a class="headerlink" href="#specifications-are-boring-where-can-i-find-some-good-example-data-files" title="Permalink to this headline">¶</a></h2>
<p>There are a few checked into the <em class="xref std std-ref">definitions repository</em>.
At the moment the selection is quite limited and not very representative.</p>
</div>
<div class="section" id="can-i-use-a-nxdl-specification-to-parse-a-nexus-data-file">
<h2>3.12. Can I use a NXDL specification to parse a NeXus data file?<a class="headerlink" href="#can-i-use-a-nxdl-specification-to-parse-a-nexus-data-file" title="Permalink to this headline">¶</a></h2>
<p>This should be possible as there is nothing in the NeXus
specifications to prevent this but it is not implemented in NAPI.
You would need to implement it for yourself. You would be wise to
consult the algorithms in the Java version of
<tt class="docutils literal"><span class="pre">NXvalidate</span></tt>
(see <em class="xref std std-ref">NXvalidate-java</em>) for more details.</p>
</div>
<div class="section" id="why-do-i-need-to-specify-the-napitype">
<h2>3.13. Why do I need to specify the <tt class="docutils literal"><span class="pre">NAPItype</span></tt>?<a class="headerlink" href="#why-do-i-need-to-specify-the-napitype" title="Permalink to this headline">¶</a></h2>
<p><em>My programming language does not need that information and
I don&#8217;t care about C and colleagues. Can I leave it out?</em></p>
<p id="index-7"><tt class="docutils literal"><span class="pre">NAPItype</span></tt>
is necessary. When implementing the NeXus-XML API we strived to
make this as general as HDF and reasonably efficient for medium
sized datasets. This is why we store arrays as a large bunch of
numbers in C-storage order. And we need the
<tt class="docutils literal"><span class="pre">NAPItype</span></tt>
to figure out the dimensions of the dataset.</p>
</div>
<div class="section" id="do-i-have-to-use-the-napi-subroutines-can-t-i-read-or-write-the-nexus-data-files-with-my-own-routines">
<span id="index-8"></span><h2>3.14. Do I have to use the <tt class="docutils literal"><span class="pre">NAPI</span></tt> subroutines? Can&#8217;t I read (or write) the NeXus data files with my own routines?<a class="headerlink" href="#do-i-have-to-use-the-napi-subroutines-can-t-i-read-or-write-the-nexus-data-files-with-my-own-routines" title="Permalink to this headline">¶</a></h2>
<p>You are not required to use the NAPI to write valid NeXus
data files. It is possible to avoid the NAPI to write and read
valid NeXus data files. But, the programmer who chooses this path
must have more understanding of how the NeXus HDF or XML data file
is written. Validation of data files written without the NAPI is
strongly encouraged.</p>
</div>
<div class="section" id="i-m-using-links-to-place-data-in-two-places-which-one-should-be-the-data-and-which-one-is-the-link">
<h2>3.15. I&#8217;m using links to place data in two places. Which one should be the data and which one is the link?<a class="headerlink" href="#i-m-using-links-to-place-data-in-two-places-which-one-should-be-the-data-and-which-one-is-the-link" title="Permalink to this headline">¶</a></h2>
<p>NeXus uses HDF5 hard links.
Both places have pointers to the actual data.
That is the way hard links work in HDF5.
There is no need for a preference to either location.
NeXus defines a <tt class="docutils literal"><span class="pre">target</span></tt> attribute to label
one directory entry as the source of the data (in this, the
link <em>target</em>).  This has value in
only a few situations such as when
converting the data from one format to another.  By identifying
the original in place, duplicate copies of the data are not
converted.
In HDF, a hard link points to a data object.
A soft link points to a directory entry.
Since NeXus uses hard links, there is no need to distinguish
between two (or more) directory entries that point to the same data.</p>
<span class="target" id="index-9"></span></div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../volume2/index.html" title="NeXus: Reference Documentation"
             >next</a> |</li>
        <li class="right" >
          <a href="design/fileformat.html" title="2.1.7.3.1.3. Physical File format"
             >previous</a> |</li>
        <li><a href="../index.html">NeXus: User Guide and Reference Documentation v2011-09 documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Contents</a> &raquo;</li>
          <li><a href="index.html" >NeXus: User Manual</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, http://nexusformat.org.
      Last updated on Sep 24, 2011.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>