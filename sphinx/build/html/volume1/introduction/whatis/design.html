

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1.1.1. A Set of Design Principles &mdash; NeXus: User Guide and Reference Documentation v2011-09 documentation</title>
    <link rel="stylesheet" href="../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2011-09',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="NeXus: User Guide and Reference Documentation v2011-09 documentation" href="../../../index.html" />
    <link rel="up" title="1.1. What is NeXus?" href="index.html" />
    <link rel="next" title="1.1.2. A Set of Data Storage Objects" href="objects.html" />
    <link rel="prev" title="1.1. What is NeXus?" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="objects.html" title="1.1.2. A Set of Data Storage Objects"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="1.1. What is NeXus?"
             accesskey="P">previous</a> |</li>
        <li><a href="../../../index.html">NeXus: User Guide and Reference Documentation v2011-09 documentation</a> &raquo;</li>
          <li><a href="../../../contents.html" >Contents</a> &raquo;</li>
          <li><a href="../../index.html" >NeXus: User Manual</a> &raquo;</li>
          <li><a href="../index.html" >1. NeXus Introduction</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">1.1. What is NeXus?</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/nexuslogo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1.1.1. A Set of Design Principles</a><ul>
<li><a class="reference internal" href="#example-of-a-nexus-file">1.1.1.1. Example of a NeXus File</a></li>
<li><a class="reference internal" href="#important-classes">1.1.1.2. Important Classes</a></li>
<li><a class="reference internal" href="#simple-data-file-example">1.1.1.3. Simple Data File Example</a></li>
<li><a class="reference internal" href="#verysimple-xml-a-very-simple-nexus-data-file-in-xml">1.1.1.4. <tt class="docutils literal"><span class="pre">verysimple.xml</span></tt>: A very simple NeXus Data file (in XML)</a></li>
<li><a class="reference internal" href="#verysimple-py-using-nexpy-to-write-a-very-simple-nexus-data-file-in-hdf5">1.1.1.5. <tt class="docutils literal"><span class="pre">verysimple.py</span></tt>: Using NeXpy to write a very simple NeXus Data file (in HDF5)</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">1.1. What is NeXus?</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="objects.html"
                        title="next chapter">1.1.2. A Set of Data Storage Objects</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/volume1/introduction/whatis/design.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="a-set-of-design-principles">
<span id="introduction-designprinciples"></span><h1>1.1.1. A Set of Design Principles<a class="headerlink" href="#a-set-of-design-principles" title="Permalink to this headline">¶</a></h1>
<p id="index-0">NeXus data files contain four types of entity:
data groups, data fields, attributes, and links.
See <a class="reference internal" href="../../design/index.html#design-groups"><em>Data Groups</em></a> for more details.</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt><a class="reference internal" href="../../design/index.html#design-groups"><em>Data Groups</em></a></dt>
<dd><p class="first last"><em>Data groups</em> are like folders that can contain
a number of fields and/or other groups.</p>
</dd>
</dl>
</li>
</ol>
<ol class="arabic" id="index-1" start="2">
<li><dl class="first docutils">
<dt><a class="reference internal" href="../../design/index.html#design-fields"><em>Data Fields</em></a></dt>
<dd><p class="first last"><em>Data fields</em>
can be scalar values or multidimensional arrays of a
variety of sizes (1-byte, 2-byte, 4-byte, 8-byte) and types
(characters, integers, floats).  In HDF, fields are
represented as HDF <em>Scientific Data Sets</em>
(also known as SDS).</p>
</dd>
</dl>
</li>
</ol>
<span class="target" id="index-2"></span><span class="target" id="index-3"></span><span class="target" id="index-4"></span><ol class="arabic" start="3">
<li><dl class="first docutils">
<dt><a class="reference internal" href="../../design/index.html#design-attributes"><em>Data Attributes</em></a></dt>
<dd><p class="first last">Extra information required to
describe a particular group or field,
such as the data units,
can be stored as a data attribute.</p>
</dd>
</dl>
</li>
</ol>
<span class="target" id="index-5"></span><span class="target" id="index-6"></span><ol class="arabic" id="index-7" start="4">
<li><dl class="first docutils">
<dt><a class="reference internal" href="../../design/index.html#design-links"><em>Data Links</em></a></dt>
<dd><p class="first last">Links are used to reference the plottable data
from <tt class="docutils literal"><span class="pre">NXdata</span></tt> when the data is provided in
other groups such as <tt class="docutils literal"><span class="pre">NXmonitor</span></tt> or <tt class="docutils literal"><span class="pre">NXdetector</span></tt>.</p>
</dd>
</dl>
</li>
</ol>
<span class="target" id="index-8"></span><p id="index-9">In fact, a NeXus file can be viewed as a computer file system. Just as files
are stored in folders (or subdirectories) to make them easy to locate, so NeXus
fields are stored in groups. The group hierarchy
is designed to make it easy to navigate a NeXus file.</p>
<div class="section" id="example-of-a-nexus-file">
<span id="introduction-examplefile"></span><span id="index-10"></span><h2>1.1.1.1. Example of a NeXus File<a class="headerlink" href="#example-of-a-nexus-file" title="Permalink to this headline">¶</a></h2>
<p>The following diagram shows an example of a NeXus data file
represented as a tree structure.</p>
<div class="figure" id="index-11">
<img alt="example NeXus data file hierarchy" src="../../../_images/Hierarchy.png" style="width: 300pt;" />
<p class="caption">Example of a NeXus data file</p>
</div>
<p>Note that each field is identified by a name, such as <tt class="docutils literal"><span class="pre">counts</span></tt>,
but each group is identified both by a name and, after a colon as a
delimiter, the class type, e.g., <tt class="docutils literal"><span class="pre">monitor:NXmonitor</span></tt>).
The class types, which all begin with <tt class="docutils literal"><span class="pre">NX</span></tt>,
define the sort of fields that the group should contain, in this
case, counts from a beamline monitor. The hierarchical design, with data
items nested in groups, makes it easy to identify information if you are
browsing through a file.</p>
</div>
<div class="section" id="important-classes">
<span id="introduction-importantclasses"></span><h2>1.1.1.2. Important Classes<a class="headerlink" href="#important-classes" title="Permalink to this headline">¶</a></h2>
<p>Here are some of the important classes found in nearly all NeXus files. A
complete list can be found in the NeXus Design section (<a class="reference internal" href="../../design/index.html#nexus-design"><em>NeXus Design</em></a>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">NXentry</span></tt> and <tt class="docutils literal"><span class="pre">NXdata</span></tt>
are the only two classes <strong>required</strong> in a valid NeXus data file.</p>
</div>
<dl class="docutils" id="index-12">
<dt><tt class="docutils literal"><span class="pre">NXentry</span></tt></dt>
<dd>(<strong>Required:</strong>)
The top level of any NeXus file contains one or more
groups with the class <tt class="docutils literal"><span class="pre">NXentry</span></tt>.
These contain all the data that is required to
describe an experimental run or scan. Each
<tt class="docutils literal"><span class="pre">NXentry</span></tt> typically contains a number of
groups describing sample information (class
<tt class="docutils literal"><span class="pre">NXsample</span></tt>), instrument details (class
<tt class="docutils literal"><span class="pre">NXinstrument</span></tt>), and monitor counts (class
<tt class="docutils literal"><span class="pre">NXmonitor</span></tt>).</dd>
</dl>
<span class="target" id="index-13"></span><dl class="docutils" id="index-14">
<dt><tt class="docutils literal"><span class="pre">NXdata</span></tt></dt>
<dd>(<strong>Required:</strong>)
Each <tt class="docutils literal"><span class="pre">NXentry</span></tt> group contains one or more
groups with class <tt class="docutils literal"><span class="pre">NXdata</span></tt>.
These groups contain the experimental results
in a self-contained way, i.e., it should be possible to
generate a sensible plot of the data
from the information
contained in each <tt class="docutils literal"><span class="pre">NXdata</span></tt> group. That means it
should contain the axis labels and titles as well as the
data.</dd>
</dl>
<dl class="docutils" id="index-15">
<dt><tt class="docutils literal"><span class="pre">NXsample</span></tt></dt>
<dd>A <tt class="docutils literal"><span class="pre">NXentry</span></tt> group will often contain a group
with class <tt class="docutils literal"><span class="pre">NXsample</span></tt>.
This group contains information pertaining to
the sample, such as its chemical composition, mass, and
environment variables (temperature, pressure, magnetic
field, etc.).</dd>
</dl>
<dl class="docutils" id="index-16">
<dt><tt class="docutils literal"><span class="pre">NXinstrument</span></tt></dt>
<dd>There might also be a group with class
<tt class="docutils literal"><span class="pre">NXinstrument</span></tt>.
This is designed to encapsulate all the
instrumental information that might be relevant to a
measurement, such as flight paths, collimations, chopper
frequencies, etc.</dd>
</dl>
<div class="figure">
<img alt="example NeXus data file hierarchy" src="../../../_images/NXinstrument.png" style="width: 200pt;" />
<p class="caption">NXinstrument excerpt</p>
</div>
<p>Since an instrument can comprise several beamline components each
defined by several parameters, they are each specified by a separate group.
This hides the complexity from generic file browsers, but makes the
information available in an intuitively obvious way if it is required.</p>
</div>
<div class="section" id="simple-data-file-example">
<span id="introduction-simpleexample"></span><h2>1.1.1.3. Simple Data File Example<a class="headerlink" href="#simple-data-file-example" title="Permalink to this headline">¶</a></h2>
<p>NeXus data files do not need to be complicated.
In fact, the following diagram shows an extremely simple NeXus file
(in fact, the simple example shows the minimum information necessary
for a NeXus data file) that could be used to transfer
data between programs. (Later in this section, we show how to write and
read this simple example.)</p>
<div class="figure" id="fig-simple-example">
<img alt="Simple Data File Example figure" src="../../../_images/Simple.png" style="width: 250pt;" />
<p class="caption">Simple Data File Example</p>
</div>
<p>This illustrates the fact that the structure of NeXus files is
extremely flexible. It can accommodate very complex instrumental
information, if required, but it can also be used to store very simple data
sets.  In the next example, a NeXus data file is shown as XML:</p>
</div>
<div class="section" id="verysimple-xml-a-very-simple-nexus-data-file-in-xml">
<span id="ex-verysimple-xml"></span><h2>1.1.1.4. <tt class="docutils literal"><span class="pre">verysimple.xml</span></tt>: A very simple NeXus Data file (in XML)<a class="headerlink" href="#verysimple-xml-a-very-simple-nexus-data-file-in-xml" title="Permalink to this headline">¶</a></h2>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
  <span class="nt">&lt;NXroot</span> <span class="na">NeXus_version=</span><span class="s">&quot;4.3.0&quot;</span> <span class="na">XML_version=</span><span class="s">&quot;mxml&quot;</span>
        <span class="na">file_name=</span><span class="s">&quot;verysimple.xml&quot;</span>
        <span class="na">xmlns=</span><span class="s">&quot;http://definition.nexusformat.org/schema/3.1&quot;</span>
        <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
        <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://definition.nexusformat.org/schema/3.1</span>
<span class="s">                            http://definition.nexusformat.org/schema/3.1/BASE.xsd&quot;</span>
        <span class="na">file_time=</span><span class="s">&quot;2010-11-12T12:40:17-06:00&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;NXentry</span> <span class="na">name=</span><span class="s">&quot;entry&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;NXdata</span> <span class="na">name=</span><span class="s">&quot;data&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;counts</span>
                  <span class="na">NAPItype=</span><span class="s">&quot;NX_INT64[15]&quot;</span>
                  <span class="na">long_name=</span><span class="s">&quot;photodiode counts&quot;</span>
                  <span class="na">signal=</span><span class="s">&quot;NX_INT32:1&quot;</span>
                  <span class="na">axes=</span><span class="s">&quot;two_theta&quot;</span><span class="nt">&gt;</span>
                           1193       4474
                          53220     274310
                         515430     827880
                        1227100    1434640
                        1330280    1037070
                         598720     316460
                          56677       1000
                           1000
                <span class="nt">&lt;/counts&gt;</span>
                <span class="nt">&lt;two_theta</span>
                  <span class="na">NAPItype=</span><span class="s">&quot;NX_FLOAT64[15]&quot;</span>
                  <span class="na">units=</span><span class="s">&quot;degrees&quot;</span>
                  <span class="na">long_name=</span><span class="s">&quot;two_theta (degrees)&quot;</span><span class="nt">&gt;</span>
                        18.90940         18.90960         18.90980         18.91000
                        18.91020         18.91040         18.91060         18.91080
                        18.91100         18.91120         18.91140         18.91160
                        18.91180         18.91200         18.91220
                <span class="nt">&lt;/two_theta&gt;</span>
          <span class="nt">&lt;/NXdata&gt;</span>
        <span class="nt">&lt;/NXentry&gt;</span>
  <span class="nt">&lt;/NXroot&gt;</span>
</pre></div>
</td></tr></table></div>
<p id="index-17">NeXus files are easy to create.  This example NeXus file was created using
a short Python program and NeXpy:</p>
</div>
<div class="section" id="verysimple-py-using-nexpy-to-write-a-very-simple-nexus-data-file-in-hdf5">
<span id="ex-verysimple-py"></span><h2>1.1.1.5. <tt class="docutils literal"><span class="pre">verysimple.py</span></tt>: Using NeXpy to write a very simple NeXus Data file (in HDF5)<a class="headerlink" href="#verysimple-py-using-nexpy-to-write-a-very-simple-nexus-data-file-in-hdf5" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python" id="index-18"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#</span>
<span class="c"># This example uses NeXpy to build the verysimple.nx5 data file.</span>

<span class="kn">from</span> <span class="nn">nexpy.api</span> <span class="kn">import</span> <span class="n">nexus</span>

<span class="n">angle</span> <span class="o">=</span> <span class="p">[</span><span class="mf">18.9094</span><span class="p">,</span> <span class="mf">18.9096</span><span class="p">,</span> <span class="mf">18.9098</span><span class="p">,</span> <span class="mf">18.91</span><span class="p">,</span>  <span class="mf">18.9102</span><span class="p">,</span> 
         <span class="mf">18.9104</span><span class="p">,</span> <span class="mf">18.9106</span><span class="p">,</span> <span class="mf">18.9108</span><span class="p">,</span> <span class="mf">18.911</span><span class="p">,</span> <span class="mf">18.9112</span><span class="p">,</span> 
     <span class="mf">18.9114</span><span class="p">,</span> <span class="mf">18.9116</span><span class="p">,</span> <span class="mf">18.9118</span><span class="p">,</span> <span class="mf">18.912</span><span class="p">,</span> <span class="mf">18.9122</span><span class="p">]</span>
<span class="n">diode</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1193</span><span class="p">,</span> <span class="mi">4474</span><span class="p">,</span> <span class="mi">53220</span><span class="p">,</span> <span class="mi">274310</span><span class="p">,</span> <span class="mi">515430</span><span class="p">,</span> <span class="mi">827880</span><span class="p">,</span> 
         <span class="mi">1227100</span><span class="p">,</span> <span class="mi">1434640</span><span class="p">,</span> <span class="mi">1330280</span><span class="p">,</span> <span class="mi">1037070</span><span class="p">,</span> <span class="mi">598720</span><span class="p">,</span> 
     <span class="mi">316460</span><span class="p">,</span> <span class="mi">56677</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">]</span>

<span class="n">two_theta</span> <span class="o">=</span> <span class="n">nexus</span><span class="o">.</span><span class="n">SDS</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;two_theta&quot;</span><span class="p">,</span> 
               <span class="n">units</span><span class="o">=</span><span class="s">&quot;degrees&quot;</span><span class="p">,</span> 
           <span class="n">long_name</span><span class="o">=</span><span class="s">&quot;two_theta (degrees)&quot;</span><span class="p">)</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">nexus</span><span class="o">.</span><span class="n">SDS</span><span class="p">(</span><span class="n">diode</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;counts&quot;</span><span class="p">,</span> <span class="n">long_name</span><span class="o">=</span><span class="s">&quot;photodiode counts&quot;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">nexus</span><span class="o">.</span><span class="n">NXdata</span><span class="p">(</span><span class="n">counts</span><span class="p">,[</span><span class="n">two_theta</span><span class="p">])</span>
<span class="n">data</span><span class="o">.</span><span class="n">nxsave</span><span class="p">(</span><span class="s">&quot;verysimple.nx5&quot;</span><span class="p">)</span>

<span class="c"># The verysimple.xml file was built with this command:</span>
<span class="c">#   nxconvert -x verysimple.nx5 verysimple.xml</span>
<span class="c"># and then hand-edited (line breaks) for display.</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="objects.html" title="1.1.2. A Set of Data Storage Objects"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="1.1. What is NeXus?"
             >previous</a> |</li>
        <li><a href="../../../index.html">NeXus: User Guide and Reference Documentation v2011-09 documentation</a> &raquo;</li>
          <li><a href="../../../contents.html" >Contents</a> &raquo;</li>
          <li><a href="../../index.html" >NeXus: User Manual</a> &raquo;</li>
          <li><a href="../index.html" >1. NeXus Introduction</a> &raquo;</li>
          <li><a href="index.html" >1.1. What is NeXus?</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, http://nexusformat.org.
      Last updated on Sep 28, 2011.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.8.
    </div>
  </body>
</html>